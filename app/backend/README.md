

## App Backend Documentation
========================

The backend of the application is built using Quart, a Python framework for asynchronous web applications. The backend code is stored in the `app/backend` folder. The frontend and backend communicate using the AI Chat App HTTP Protocol.

## Structure
---------
The `app/backend` directory contains the main application logic for the backend. It includes the following key components:

- `approaches`: This folder contains the classes powering the Chat and Ask tabs. Each class uses a different RAG (Retrieval Augmented Generation) approach, which include system messages that should be changed to match your data.

- `main.py`: This is the main entry point for the backend application. It initializes the Quart application and sets up the routes for the API.

## Customization
-------------
You can customize the backend to suit your needs. Typically, the primary backend code you'll want to customize is the `app/backend/approaches` folder.

## Chat Approach
-------------
The chat tab uses the approach programmed in `chatreadretrieveread.py`. It involves several steps:

1. It calls the OpenAI ChatCompletion API (with a temperature of 0) to turn the user question into a good search query.
2. It queries Azure AI Search for search results for that query (optionally using the vector embeddings for that query).
3. It then combines the search results and original user question, and calls the OpenAI ChatCompletion API (with a temperature of 0.7) to answer the question based on the sources. It includes the last 4K of message history as well (or however many tokens are allowed by the deployed model).

The `system_message_chat_conversation` variable is currently tailored to the sample data since it starts with "Assistant helps the company employees with their healthcare plan questions, and questions about the employee handbook." Change that to match your data.

## Testing
-------
The backend includes a suite of tests to ensure its functionality. These tests are located in the `tests` directory and can be run using the appropriate test runner for your environment.

For more details on customizing the backend, refer to the customization guide.

## Routes
The backend application exposes the following routes:

- `/`: This is the root route of the application. It can be used to check if the backend is running.

- `/chat`: This route is used for handling chat requests. It accepts a POST request with the user's question and returns the response generated by the chat approach.

- `/ask`: This route is used for handling ask requests. It accepts a POST request with the user's question and returns the response generated by the ask approach.

- `/health`: This route is used for health checks. It can be used to check the health status of the backend application.

- `/docs`: This route is used for serving the API documentation. It provides detailed information about the available routes and their usage.

You can use these routes to interact with the backend application and test its functionality.

